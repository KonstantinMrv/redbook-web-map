<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <title>Червената книга на България – ГИС платформа</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

  <!-- Нашият CSS (root-relative път за Pages) -->
  <link rel="stylesheet" href="/redbook-web-map/css/app.css" />

  <!-- fallback, ако по някаква причина app.css не се зареди -->
  <style>#map{min-height:60vh;display:block}</style>
</head>
<body>
  <noscript>Нужен е JavaScript, за да видите картата.</noscript>

  <div id="map"></div>

  <div id="sidebar" aria-label="Sidebar">
    <div class="topbar">
      <h3>Червената книга на България – ГИС платформа</h3>
      <button id="btnToggleSidebar" class="toggle" title="Свий / разгъни контролите">–</button>
    </div>

    <div class="controls" role="group" aria-label="Controls">
      <section>
        <strong>Основа</strong>
        <label><input type="radio" name="polyMain" value="morph"> Геоморфоложки единици</label>
        <div id="morphLine" class="zones-row hidden">
          <div class="zones-label">Изберете ниво</div>
          <select id="ddMorph">
            <option value="morph_1">Ниво 1</option>
            <option value="morph_2">Ниво 2</option>
            <option value="morph_3">Ниво 3</option>
          </select>
        </div>

        <label><input type="radio" name="polyMain" value="land" checked> Ландшафтно райониране</label>

        <label class="checkline" style="margin-top:6px;">
          <input type="radio" name="polyMain" value="zones"> Защитени територии
        </label>
        <div id="zonesLine" class="zones-row hidden">
          <div class="zones-label">Изберете слой</div>
          <select id="ddZones">
            <option value="n2k_birds">Natura 2000 — Зони за птици</option>
            <option value="n2k_habitats">Natura 2000 — Зони по местообитания</option>
            <option value="protected_area">Защитени територии по ЗЗТ</option>
          </select>
        </div>
      </section>

      <section>
        <strong>Книги</strong>
        <label><input type="radio" name="points" value="plants"> Том I. Растения и гъби</label>
        <label><input type="radio" name="points" value="animals" checked> Том II. Животни</label>
      </section>

      <section>
        <input id="searchBox" type="text" placeholder="Търси по наименование" aria-label="Search">

        <details id="advFilters">
          <summary>Филтри</summary>
          <div class="row" style="margin-top:6px">
            <select id="ddSTATUS"><option value="">Статус (всички)</option></select>
            <select id="ddFAMILY"><option value="">Семейство (всички)</option></select>
          </div>
          <div class="row" id="rowTypeOrder" style="margin-top:6px">
            <select id="ddTYPE"><option value="">Тип (всички)</option></select>
            <select id="ddORDER"><option value="">Разред (всички)</option></select>
          </div>
          <div class="row" style="margin-top:6px">
            <label class="checkline"><input type="checkbox" id="cbENDEMIC"> Ендемит</label>
            <label class="checkline"><input type="checkbox" id="cbRELICT"> Реликт</label>
          </div>
          <div class="btnbar" style="margin-top:8px">
            <button id="btnClearFilters" title="Изчисти всички филтри">Изчисти филтрите</button>
            <button id="btnClearSel" title="Изчисти селекцията от картата">Изчисти селекцията</button>
          </div>
        </details>
      </section>
    </div>

    <div id="count" class="muted">Въведете търсене или изберете територия.</div>
    <div id="list" role="list" aria-label="Result list"></div>
  </div>

  <!-- Библиотеки -->
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

  <!-- Нашият JS (root-relative път за Pages) -->
  <script defer src="/redbook-web-map/js/app.js"></script>
</body>
</html>
